# The Thought-Action-Observation Cycle
An AI Agent is made of 3 components:
1. Model -> it understands language, reasons through a given problem, and outlines steps to solve it
2. Tools -> connect the agent to the outside world, accessing data, performning actions, and making things happen
3. Orchestration Layer -> it coordinates everything, keeping the agent moving towards its goal

## Orchestration Layer
We defined the orchestration layer as a continuous loop that controls how an agent processes information, remembers information, and makes decisions.

### Maintaining Memory, State, Reasoning, and Planning
The orchestration layers maintains memory, state, reasoning, and planning

![Maintaining Memory State Reasoning and Planning](<Maintaining Memory State Reasoning and Planning.png>)

### Thought Action Observation Cycle

![The Thought Action Observation Cycle](<The Thought Action Observation Cycle.png>)

The Thought Action Observation Cycle is a useful framework for understanding orchestration. We can expand the cycle into the following
- Thought -> the model decides the next step based on the user prompt
- Action -> where the agent takes an action, by calling the tools at their disposal
- Obsercvation -> where the model reflects on the response from the tool. Feeding into the next set of thoughts and actions

#### Example - A Customer Support Agent Example
A customer support agent receives this message: "I forgot to cancel my subscription and was accidentally billed. Help me get a refund."
1. In the first cycle, the agent thinks it needs to undertand the customer's details and determines which tool is needed to access that information. It decides to access the database and make observations based on the information found
2. In the second cycle, the agent reacts to the observation, and thinks that given the renewal was recent, to check the company's refund policies. The next action is to query the company policy and make an obsrvation based on that policy
3. In the third cycle, the system determines that the customer qualifies for a refund, initiates the refund transaction, and observes whether it was successfully proessed or not
4. The agent then thinks it should update the customer, it acts by sending a confirmation email with the cancellation and updating the subscription status, and observes that it can close the ticket now.
5. Final Action -> Ticket can now be closed


|Cycle|Thought|Action|Observation|
|---|---|---|---|
|1|"I need to understand this customer's situation. Let me check their account details."|Access customer database and retrieve subscription history|Customer has premium plan, renewed 3 days ago for $99|
|2|"The renewal is recent. I should check our refund policy for accidental renewals."|Query company policy database for refund rules|Policy allows full refunds within 7 days for accidental renewals|
|3|"Great, they qualify! Now I need to process the refund."|Initiate refund transaction through payment system|Refund of $99 successfully processed|
|4|"Refund complete. I should update the customer and cancel their subscription to prevent future charges."|Send confirmation email and update subscription status to 'cancelled'|Email sent, subscription cancelled, ticket can be closed|